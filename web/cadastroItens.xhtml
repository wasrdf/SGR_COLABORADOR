<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"

      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:head>
        <title> Sistema de Gestão Restaurante</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>
        <meta name="viewport" content="width=device-width, initial-scale=1"></meta>
        <!-- Carrega Bootstrap e CSS Extra -->
        <link href="css/bootstrap.css" rel="stylesheet"></link>
        <link href="css/SGR_Beta.css" rel="stylesheet"></link>
        <link href="css/sgr.css" rel="stylesheet"></link>
        <!-- Carrega JQuery -->
        <script src="js/jquery-2.1.3.js"></script>
        <!-- Carrega Plugins Avulsos -->		
        <script src="js/bootstrap.js"></script>

    </h:head>
    <body>
        
        <ui:include src="topo.xhtml" />
        
        
        <h:form id="frmPrincipal" rendered="#{itemBeanController.tela == 0}">

             
            <div  style="margin-left: 10px;margin-top: 5%" >
                <p:inputText value="#{itemBeanController.filtro}"  />
                <p:commandButton    class="btn btn-default navbar-btn"   action="#{itemBeanController.listarItens()}" value="Buscar" update="item"  />
                <p:commandButton    class="btn btn-default navbar-btn"   action="#{itemBeanController.novoItem()}" value="Novo Produto" ajax="false"  />
                <p:commandButton    class="btn btn-default navbar-btn"   action="#{funcionarioController.navegarPara('/admin.jsf')}" value="Voltar" ajax="false"  />

                <h:dataTable  style="background-color: white;width: 40%" var="item" value="#{itemBeanController.listaItem}" id="item">

                    <h:column  >
                        <f:facet  name="header">
                            <h:outputText style="margin-right: 20px" value="ID"/>
                        </f:facet>
                        <p:commandLink ajax="false" actionListener="#{itemBeanController.selecionarItem(item)}"  value="#{item.codigo}"/>
                    </h:column>


                    <h:column>
                        <f:facet name="header">
                            <h:outputText style="margin-right: 220px;"  value="Nome"/>
                        </f:facet>
                        <p:commandLink ajax="false" actionListener="#{itemBeanController.selecionarItem(item)}"  value="#{item.nome}"/>
                    </h:column>


                    <h:column>
                        <f:facet name="header">
                            <h:outputText style="margin-right: 50px"  value="Tipo"/>
                        </f:facet>
                        <p:commandLink ajax="false" actionListener="#{itemBeanController.selecionarItem(item)}"  value="#{item.tipo}"/>
                    </h:column>

                    <h:column>
                        <f:facet name="header">
                            <h:outputText  value="Preço"/>
                        </f:facet>
                        <h:outputText style="text-align: right"  value="#{item.preço}">
                            <f:convertNumber pattern="#,##0.00" minFractionDigits="2"/>  
                        </h:outputText>
                    </h:column>


                </h:dataTable>
        </div>


        </h:form>
        
        <h:form style="margin-top: 5%;background-color: white;margin-left: 3%;width: 80%" id="frmDetalhe" rendered="#{itemBeanController.tela == 1}" >
            <h:panelGrid style="margin-left: 10px" columns="1">
            <h:outputText value="Nome" />
            <p:inputText  size="30" requiredMessage="Nome obrigatório" value="#{itemBeanController.itemBean.nome}" />
            
            <h:panelGrid>
            <h:outputText value="Composição" />
            <p:inputTextarea maxlength="199" cols="50" rows="10" value="#{itemBeanController.itemBean.composicao}" />
            </h:panelGrid>
            
            <h:panelGrid columns="1">
            <h:outputText value="Tipo de pratos já cadastrados" />
            
            <p:selectOneMenu value="#{itemBeanController.itemBean.tipo}" >
                <f:selectItem itemValue="#{null}" itemLabel="Nenhum" />
                <f:selectItems var="itemTp" value="#{itemBeanController.tiposDePrato}" itemLabel="#{itemTp.tipo}" itemValue="#{itemTp.tipo}" />
            
            </p:selectOneMenu> 
            
            </h:panelGrid>
            <h:outputText value="Nome" />
            <p:inputText  value="#{itemBeanController.itemBean.preço}" >
                  <f:convertNumber pattern="#,##0.00" minFractionDigits="2"/>  
            </p:inputText>
            
            <h:panelGrid columns="2" >
            <p:commandButton    class="btn btn-success navbar-btn"   action="#{itemBeanController.salvar()}" value="Salvar" ajax="false"  />
            <p:commandButton    class="btn btn-danger navbar-btn"   action="#{itemBeanController.deletar()}" value="Deletar" ajax="false"  />
            <p:commandButton    class="btn btn-default navbar-btn"   actionListener="#{itemBeanController.mudarTela(0)}" ajax="false" value="Voltar"   />
            </h:panelGrid>
            </h:panelGrid>
                  <p:messages  showDetail="true" autoUpdate="false" closable="true"  />
        </h:form>

     
    </body>

</html>